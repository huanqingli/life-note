## 关于本站
### 摘要
现在是 2017-09-21  
这是我从事web开发以来第二版个人站点，第一版还是毕业之前，只是一些静态文件和一个PHP的留言簿，全部使用原生JavaScript硬生生手写的，15年底就不再维护了。  
本文会对本站的方方面面进行简要介绍。
### 目的
做第一版网站的时候，一是学到新知识很兴奋想自己做一些东西实践一下，二是想分享一下自己学到和总结的一些内容。  
参加工作以后，陆续发现几点问题:  
* 感觉自己的站点使用的技术不够高上大，应该用新的技术栈重构一下。  
* 分享的内容质量也不够高，不过近一年我都是争取每个月最少创作一篇质量过关(自认为)的技术文章。
* 分享文章的目的没有达到，本来是想分享给更多的人看到，结果只有几个朋友偶尔会看一眼，没有起到作用。
所以我决定在 cnblog 做内容分享，不再维护之前的站点，理由也很充分:  
搜索排名较高，自己时常搜索技术问题，排在前面的经常是 Stack Overflow ，SegmentFault，cnblog，CSDN。前两个主要是问答，最后一个样式太死板，所以我选了 cnblog。编辑模式支持 markdown，现在我的基本所有编写的文本资料都使用 markdown，这样从写作完成到分享出去就非常省心，节约时间。  
[我的 cnblog](http://www.cnblogs.com/lihuanqing/)
那么问题来了，为什么我又搞了个人站点2.0版呢？  
虽然我工作和学习的重点在前端部分，但就我个人性格而言我是喜欢去探索新的领域的，我一直有自己完成一个产品的想法，从设计，前端页面，后台接口，数据库搭建，测试，部署，运维，这个站点并不完美，但是它是一个完整的作品，是我对一个产品生命周期的每一个环节的一种尝试。所以就有了你现在看到的网站。  
### 过程
大概一个月前，阿里云提醒我域名快到期了，该续费了。此为导火索，勾起我搭个站点的欲望。  
我之前站点的服务器是英国的一个虚拟机服务商提供的，只能通过ftp部署静态文件和php数据库只能是MySQL还不能远程连接，正好也快到期了，换个亚马逊的服务器，打算后台服务使用 nodejs。这个月工作也不太忙，分分钟域名续费，服务器租起，说干就干。  
前端技术还采用我最熟悉的 React 全家桶，搭配 antd 框架解决了设计上的问题，后台接口使用 nodejs 数据库 mongoDB，这两个技术之前就有所接触和实践，所以也没遇到什么大坑。真正陌生的领域是服务器。虽然我从读研开始就一直使用 Mac 也经常使用终端程序，但服务器端和本机区别还是有点大，关注的点也很大不同。连接服务器，搭建环境，Nginx，mongodb，node，git...一个一个装，通过 git 从 bitbucket 下载开发文件然后部署(使用 pm2 集群)，后来发现访问速度太慢，打得包太大了，先是放弃了一些例如 immutable 这样有点大又不是必须的库，然后又在 Nginx 配置 gzip，最终体积缩小了一大半，再后来发现七牛对象储存访问速度很快，就把静态文件都放到七牛，终于首次访问站点时间基本能控制在 3 秒以内，虽然还是不理想，也算勉强接受吧。目前博客，评论，注册登录，交易日志都能正常访问使用。一个月左右的业余时间(主要是三个周末)，从开始到现在，还是有点成就感的。
### 收获
在上面经历的过程中，迈过很多坑，解决很多问题，也就有了很多收获，罗列一下。
* 熟悉 Linux 服务器。Mac 虽然是类 Linux 的，但毕竟真正链接到服务器并部署应用程序还是学到了很多新的知识的。
* 了解 Nginx 配置。从端口代理，配置 gzip 压缩，到访问 React 项目目录返回固定文件等等，基本了解了 Nginx 的一些主要配置。
* 对 node mongodb http 等领域有一些新的认识。虽然这些已经算是比较熟悉的领域，但是依然有新的知识等着我，比如说浏览器在跨域 PUT 或者 DELETE 请求或者 header 中包含认证信息等特殊信息的请求(非简单请求)之前会有一个称作 Preflight Request 的 OPTION 请求后台需要确认授权。
* 即使时前端部分依然有新收获。比如自己实现了 React-Router-Redux 的功能(把router信息放到Redux)等。  
这就是关于本站点的各种信息，所用技术上面都有提到。我是web开发工程师李焕晴，专注前端偏后。