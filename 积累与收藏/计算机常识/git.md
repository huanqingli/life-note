## GIT
### 工作区 -> 暂存区 -> 版本库 -> 远程仓库
[**git document**](https://git-scm.com/docs)  
[**pro git**](https://git-scm.com/book/zh/v2)  
[**cheat sheet**](https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf)  
### 本地仓库操作：
#### 基础配置：
- `git config --global`: 针对当前用户，全局生效的配置
- `git config`: 针对当前项目生效的配置，覆盖 global 的配置。
常用配置项：  
`core.pager`: 分页器，默认less 可以设为 '' ，避免 diff 和 log 的时候进入分页器。  
`user.name`: 用户名， `user.email`: 邮箱
`alias`: 设置别名 alias.co checkout：此后可用co代替checkout。

#### 创建/拷贝版本库：
- `git init` ： 终端进入一个目录后，该命令在此目录创建版本库。
- `git clone` ： 后接项目url和克隆到本地后的文件名。

#### 提交修改：
- `git add` ： 后面加文件名（带后缀），此命令将对该文件的修改添加到暂存区(或者将新文件列入监控范围）。  
`git add .` 对全部文件进行add操作。（ * 也可以）  
可接参数：   
`-v` 列出添加或修改的文件   
`-p` 列出修改内容   
`--all`（`-A`）直接把工作区扔给暂存区  
- `git commit -m` ： 后面加本次提交的目的或修改的内容等（提交信息），注意放在“”（双引号）之内，此命令将暂存区内全部内容提交到版本库。每一次运行 commit 提交操作，都是对你的项目作一次快照，以后可以回到这个状态，或者进行比较。  
可接参数  
`-v`: 显示diff信息。  
`-a`: 跳过暂存步骤，把所有被监控文件的修改提交到版本库。相当于add commit两个命令一起（但不会添加新创建的文件）。  
`--amend`:覆盖（废弃）上次提交。（上次提交说明写错了或者有文件遗漏了）用于修改提交历史 带 --no-edit 参数后，不改变提交信息  

#### 查询状态/差异：
- `git status`： 版本库当前的状态。
可接参数：
`-s` :输出简单版本。
'-v' :相当于输出 git diff --cached
'-v -v' :相当于输出 git diff
- `git diff`： 当前文件们（工作区）与暂存区的文件们有何差异。也就是修改之后还没有暂存起来的变化内容。  
可选参数：  
`--cache`:已提交到暂存取的文件与版本库的文件们有何差异。  
`HEAD`：工作区与版本库之间的差异。  
`branchNameA`:与A分支比较（默认为当前分支）。  
`branchNameA branchNameB`：比较A，B两个分支的差异。  
- `git difftool`：用外部工具查看差异。

#### 撤销修改/版本回退
- `git reset`：后面接版本号，将HEAD快照指向该版本。**不影响工作区。**  
可选参数：  
`--soft`: 还不会影响暂存取。  
`HEAD`: 后面可加文件名（带后缀），将缓存区内的该文件恢复到HEAD指向的快照，工作区不变。不加文件名对所有文件生效。  
`--hard`: 工作区内的文件也会恢复到指定快照 _不安全_  
HEAD 指向某提交后，该提交之后的提交会消失。   
版本回退顺序：  
移动 HEAD 分支的指向 （若指定了 --soft，则到此停止）  
使索引（暂存区）看起来像 HEAD （若未指定 --hard，则到此停止）  
使工作目录看起来像索引  
- `git checkout --`：后面加文件名（带后缀），撤销工作区内对该文件的修改（工作区内删除的文件也可此命令恢复），暂存区有内容就回到暂存区的状态，否则就回到版本库内的状态。_不安全_

#### 删除/重命名文件
- `git rm`：后面加文件名（带后缀），此命令将对该文件的删除操作添加到暂存区。之后commit操作和提交修改中的commit操作相同。此命令删除版本库文件还会删除工作区文件。（工作区直接删除文件，也要再移除监控）
- `git rm --cached`：后面加文件名（带后缀），此命令将文件移除版本库并取消监控，不删除工作区文件。
- `git mv file_a file_b`: 把文件a重命名为文件b。  
相当于文件系统中重命名后运行：$ git rm file_a   $ git add file_b  

#### 分支操作
- `git branch`: 查看分支，后接分支名则创建该分支。  
可选参数：  
`－r`: 查看远程分支  
`-d`: 删除分支(合并后没用的分支删除之)后加 -r 一并删除远程分支  
- `git checkout branchNameA`:指针(HEAD)切换到分支A，工作区也会切换到该分支最后一次提交的样子。  
可选参数：  
`-b`： 新建分支并切换。
- `git merge branchNameA`：将分支A合并到当前分支。
