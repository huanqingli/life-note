### 项目经验

聊什么：项目开发流程、技术架构、项目亮点、项目中遇到的难点、性能优化、工程化

#### 业务层面的推动和成绩：
解决的痛点，满足的场景，取得的成果，做了哪些优化  
首先我先接手的debug平台是面向运营的广告诊断平台，披露的都是底层数据，运营根据数据作出判断再去广告后台作出对应修改。  
当时广告后台列表页也有一些简单的诊断结论，提示改改出价改改预算之类的。  
当时我申请接手诊断后，进行了业务测技术测双重构。之前的诊断其实就是一个简单的页面，提供了简单的诊断结论和修改建议。  
跟产品和后端进行商议后，业务测的重构主要推进了：  
第一点，诊断作为独立平台输出，以广告后台的菜单作为入口，提供了全新的诊断列表页，广告主可以集中处理投放效果不佳的广告计划。  
第二点，推出一键优化工具，对于较复杂的情况，我们直接引导用户进入一键优化工具，可以对十几种诊断建议进行组合输出和提交修改。  
第三点，输出sdk，向广告后台输出诊断能力，并为向更多业务方输出诊断能力提供了可能性。  

平台上线稳定运行后后渗透率达到了5.3%，问卷反馈得到了大量好评。  
但是还有少量的反馈提出诊断建议不够丰富，一键优化上线后，这类反馈也大量减少。  
输出sdk后，首先广告后台只需要简单接入即可在他们的页面提供更丰富的诊断服务和建议，而且后续巨量问问就是智能客服平台还有代理商平台也接入了诊断工具。sdk可以说也是为合作部门节省了大量人力，提能增效效果显著。  

#### 项目架构层面；
项目的技术架构，技术体系与技术选型，数据处理

debug：页面配置化的探索  
梳理项目特征：
1. 一共有40多个页面，有一些个性化的页面，但是70%以上的页面会有一个比较模式化的结构，form+chart+table，或者这三种的组合。
2. 左侧固定侧边菜单，根据权限渲染。分三种角色，对应三种权限，普通权限，穿山甲权限，高级权限。普通权限可以看10几个页面，穿山甲权限除了这10几个还有额外的7，8个穿山甲业务相关的页面，高级权限是可以看全部40多个页面。
3. 虽然我是要彻底重构这个项目，但属于技术侧重构，产品侧还是需要迭代的。

根据第一个特点，我决定采用页面配置化策略，通过json去描述页面，1是提升开发和后期维护的效率，2是为后续后端或者产品自行配置简单的页面留出了可能性。  
具体实施细节：
所有组建注册在VUE上。
所有路由通过一个总组建进行管理和渲染。也就是vue-router的匹配模式只有一个*。
核心就是根据路由去绑定这个页面的所有信息，和路由绑定的信息以json形式提供，监听路由的变动获取最新的信息，根据最新的信息渲染页面。  
过程是，路由=》路由对象（是个虚拟的路由对象，实际的路由配置只有一个*）里找到该路由对应的配置（主要是一个childlist，包含哪些模块）=》通过配置生成描述完整的页面信息的json（路由配置有个页面id，该页面id对应唯一的页面描述文件（对应一个方法），并将childlist作为参数传入该方法，生成完整的页面描述信息）。  
侧边栏是公共部分，通过经过权限漏斗的虚拟路由对象渲染。  
*后续出现细化权限控制的需求，随着需求越来越多，直接修改了后端返回的权限结构体，返回当前用户的权限结构体，省去路由的结构后，直接通过当前路由和用户的权限结构体生成当前页面的的完整页面配置。*  
所有数据管理统一由VUEX代理，包括当前页面的展示数据，表单数据，路由信息数据。  
组件部分分两类，一类是modules，一类是base component。  
base component 就包括表单，线图，条图，饼图，table，列表之类的元素。  
modules 就是利用base component的一些组合，一些常见模式，比如表单+线图+table，是一个很常见的模式，大量页面都复用了这个模式。  
我们的页面描述文件，就是有一个或者多个modules和其对应配置组成，如果涉及到一些个性化的组件也可以直接配置base component。  
上面就是debug系统的主体架构和主体流程。  
主要带来了下面几个优势：  
1. 迭代维护时大幅增效，解决了迭代效率的痛点。如果新增一个页面，只需要增加一个新的页面描述文件，将相应的module和配置写好，然后在虚拟路由对象里增加一个key映射到新的页面描述文件。如果是利用已有的模式的化，这就是全部的工作了。  
2. 项目搭建的过程中，对团队协作的帮助，可以相对的抽离组件内部逻辑和业务逻辑，偏向技术的同学可以开发基础组件，偏向业务的同学可以写描述文件和modules，可以更有效的协作开发。  
3. 对个性化开发的支持，这套架构主要对模式化较强的新页面开发有较大的效率提升，但是依然较好的支持个性化需求，如果是局部的个性化，可以添加组件然后再页面描述文件里增加该组件即可，如果页面整体是完全的个性化页面，可以在实际的路由里增加一个页面，按照传统的开发方式进行开发。所以基本做到进可攻退可守。  


#### 技术细节层面：
一个程序化标题输入框。类似于一个mini的富文本编辑器，属于一个较复杂的交互。  

sdk长列表利用虚拟滚动进行性能优化，解决卡顿问题。  

可视化的方法论：涉及到用图表进行数据展示的问题产品基本都会咨询我，举个具体的例子，诊断详情当时讨论需求的时候，涉及到一个五维数据的展示，首先第一个温度一条时间轴。第二个维度每个时间点会有一个广告漏斗，比如在粗排阶段过滤，精排阶段过滤，定向阶段等，到最后能投放出出去的量。第三个维度是每个时间段的总消耗。第四个维度是某时间点广告主进行的操作。第五个维度是每个时间点该计划受挤压的情况。  
这种情况下首先是一张面积图，颜色由浅到深展示广告过滤情况，无论是单个时间点看还是整段时间轴看都非常直观。然后是一条折线悬浮在面积图上，展示每个时间点的消耗，然后是如果广告主有操作的时间点，在时间轴上显示一条垂直的虚线，悬浮后在tooltips里还会有操作详情。最后创意挤压是一个二维热点图，和上面的主图时间轴对齐。  
这张图信息含量就非常高，常规的方式可能会用图表+表格的方式，信息就会分散，增加了用户获取和理解信息的难度。  

#### 项目遇到的坑，项目总结，收获：
分析现有的问题，发现未来的问题  



[大纲参考](https://jishuin.proginn.com/p/763bfbd23bca)